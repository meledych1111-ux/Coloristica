<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>PRO –ö–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∞ | –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è</title>
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è Android –∏ iOS -->
    <meta name="application-name" content="PRO –ö–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∞">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PRO –ö–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∞">
    <meta name="description" content="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è –≤–æ–ª–æ—Å">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#4a148c">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#4a148c">
    
    <!-- iOS –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PRO –ö–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∞">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <link rel="apple-touch-startup-image" href="splash-screen.png">
    
    <!-- Android –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#4a148c">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- –ú–∞–Ω–∏—Ñ–µ—Å—Ç PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon.png">
    
    <!-- –î–ª—è iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="–ö–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∞">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #2c3e50;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #4a148c 0%, #6a1b9a 100%);
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(74, 20, 140, 0.2);
            color: white;
            flex-shrink: 0;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .online-status {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
            display: none;
        }

        .online-status.online {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            display: block;
        }

        .online-status.offline {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            display: block;
        }

        .install-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 8px 16px;
            background: linear-gradient(135deg, #ff5722 0%, #ff7043 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            display: none;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            flex: 1;
            min-height: 0;
            overflow: hidden;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
                overflow-y: auto;
            }
        }

        /* –ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ */
        .selection-panel {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .selection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            flex-shrink: 0;
        }

        .selected-display {
            text-align: center;
            flex: 1;
        }

        .selected-code {
            font-size: 3rem;
            font-weight: 900;
            color: #4a148c;
            margin-bottom: 5px;
        }

        .selected-name {
            font-size: 1.2rem;
            color: #ff5722;
            font-weight: 600;
        }

        .quick-select {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 10px 15px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: #4a148c;
            font-size: 0.9rem;
        }

        .quick-btn:hover {
            border-color: #4a148c;
            background: #f3e5f5;
        }

        /* –ö—Ä—É–≥–∏ –≤—ã–±–æ—Ä–∞ */
        .selection-circles {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            flex: 1;
            min-height: 0;
            align-items: center;
        }

        .circle-container {
            text-align: center;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .circle-label {
            color: #4a148c;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .color-circle {
            width: 280px;
            height: 280px;
            margin: auto;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 0 10px white, 0 0 0 12px #eee;
            flex-shrink: 0;
        }

        /* –°–µ–≥–º–µ–Ω—Ç—ã –∫—Ä—É–≥–∞ */
        .segment {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            left: 0;
            top: 0;
            cursor: pointer;
            clip-path: polygon(0 0, 100% 100%, 0 100%);
        }

        .segment:hover {
            filter: brightness(1.1);
        }

        .segment.selected {
            box-shadow: inset 0 0 0 5px white, inset 0 0 0 7px #ff5722;
            z-index: 10;
        }

        .segment.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            filter: grayscale(0.8);
        }

        /* –¶–∏—Ñ—Ä—ã –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞—Ö - –ë–ï–õ–´–ï –° –ß–ï–†–ù–û–ô –†–ê–ú–ö–û–ô */
        .segment-number {
            position: absolute;
            font-weight: 900;
            font-size: 1.8rem;
            pointer-events: none;
            z-index: 20;
            color: #ffffff;
            text-shadow: 
                -1px -1px 0 #000000,
                1px -1px 0 #000000,
                -1px 1px 0 #000000,
                1px 1px 0 #000000,
                0 -1px 0 #000000,
                0 1px 0 #000000,
                -1px 0 0 #000000,
                1px 0 0 #000000,
                0 0 3px #000000;
            -webkit-text-stroke: 1px #000000;
            left: 33%;
            top: 67%;
            transform: translate(-50%, -50%);
            will-change: transform;
        }

        /* –¶–≤–µ—Ç–∞ —É—Ä–æ–≤–Ω–µ–π –≥–ª—É–±–∏–Ω—ã */
        .depth-1 { background: #000000; }
        .depth-2 { background: #2C1810; }
        .depth-3 { background: #422A1A; }
        .depth-4 { background: #5C3A22; }
        .depth-5 { background: #7A4F2E; }
        .depth-6 { background: #9C6D3C; }
        .depth-7 { background: #BD8B4A; }
        .depth-8 { background: #D8A85C; }
        .depth-9 { background: #F0C67A; }
        .depth-10 { background: #FFE1A3; }

        /* –¶–≤–µ—Ç–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π */
        .tone-0 { background: #D4BFA6; }
        .tone-1 { background: #A8B8B8; }
        .tone-2 { background: #F0E9D8; }
        .tone-3 { background: #E8C26A; }
        .tone-4 { background: #C46C38; }
        .tone-5 { background: #D9B998; }
        .tone-6 { background: #9C2C4A; }
        .tone-7 { background: #7A402C; }
        .tone-8 { background: #E89438; }
        .tone-9 { background: #D85C28; }
        .tone-10 { background: #8C548C; }
        .tone-12 { background: #3C5A8C; }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */
        .info-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 0;
            overflow-y: auto;
            height: 100%;
        }

        .info-card {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            flex-shrink: 0;
        }

        .info-card h3 {
            color: #4a148c;
            margin-bottom: 15px;
            font-size: 1.2rem;
            border-bottom: 3px solid #ff5722;
            padding-bottom: 10px;
        }

        /* –ë–ª–æ–∫ —Å –æ—à–∏–±–∫–æ–π */
        .error-container {
            display: none;
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border: 2px solid #ef5350;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            color: #c62828;
        }

        .error-container.show {
            display: block;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–≤–µ—Ç–µ */
        .color-info-container {
            min-height: 200px;
        }

        /* –ë–ª–æ–∫ —Å —Ü–≤–µ—Ç–æ–º */
        .color-recipe {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 8px solid #4a148c;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        /* –°–µ–∫—Ü–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
        .info-section {
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .info-section.highlight {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 6px solid #ff9800;
            margin: 20px 0;
            border: 1px solid #ffcc80;
        }

        .section-title {
            font-weight: 700;
            color: #4a148c;
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed #dee2e6;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: #555;
            flex: 1;
        }

        .info-value {
            font-weight: 700;
            color: #ff5722;
            flex: 1;
            text-align: right;
            font-size: 1.1rem;
        }

        /* –ë–ª–æ–∫ —Ä–µ—Ü–µ–ø—Ç–∞ */
        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .recipe-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            text-align: center;
        }

        .recipe-amount {
            font-weight: 800;
            color: #4a148c;
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .recipe-name {
            font-size: 0.9rem;
            color: #666;
        }

        /* –ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è */
        .neutralization-box {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            border: 2px solid #8e24aa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .neutralization-header {
            color: #6a1b9a;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .neutralization-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 5px solid;
        }

        .neutral-color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #ddd;
            flex-shrink: 0;
        }

        /* –ë—ã—Å—Ç—Ä–∞—è –ø–∞–ª–∏—Ç—Ä–∞ */
        .quick-palette {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .palette-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            text-align: center;
        }

        .palette-card:hover {
            border-color: #4a148c;
        }

        .palette-color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #eee;
            margin: 0 auto 8px;
        }

        .palette-code {
            font-weight: 800;
            color: #4a148c;
            font-size: 1rem;
            margin-bottom: 3px;
        }

        .palette-name {
            font-size: 0.8rem;
            color: #666;
        }

        /* –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã */
        .tools-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 15px;
        }

        .tool-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .tool-card:hover {
            border-color: #4a148c;
            background: #f3e5f5;
        }

        .tool-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #4a148c 0%, #6a1b9a 100%);
            color: white;
            border-radius: 8px;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .tool-content {
            flex: 1;
        }

        .tool-title {
            font-weight: 700;
            color: #4a148c;
            margin-bottom: 3px;
            font-size: 1rem;
        }

        .tool-description {
            color: #666;
            font-size: 0.85rem;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            width: 90%;
            max-width: 900px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            padding: 20px;
            background: linear-gradient(135deg, #4a148c 0%, #6a1b9a 100%);
            color: white;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close {
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            opacity: 0.8;
        }

        .close:hover {
            opacity: 1;
            color: #ffcc80;
        }

        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #ff5722;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            .selection-circles {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 768px) {
            body {
                position: relative;
                overflow: auto;
                height: auto;
            }
            
            .container {
                height: auto;
            }
            
            .main-grid {
                overflow: visible;
            }
            
            .info-panel {
                overflow: visible;
            }
            
            header {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .selected-code {
                font-size: 2.5rem;
            }
            
            .quick-select {
                justify-content: center;
            }
            
            .quick-btn {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .color-circle {
                width: 240px;
                height: 240px;
            }
            
            .segment-number {
                font-size: 1.5rem;
            }
            
            .quick-palette {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .tool-card {
                padding: 12px;
                gap: 12px;
            }
            
            .tool-icon {
                width: 35px;
                height: 35px;
                font-size: 1.1rem;
            }
            
            .recipe-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .color-circle {
                width: 220px;
                height: 220px;
            }
            
            .segment-number {
                font-size: 1.3rem;
            }
            
            .quick-palette {
                grid-template-columns: 1fr;
            }
            
            .selection-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .info-value {
                text-align: left;
                font-size: 1rem;
            }
            
            .tool-card {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .recipe-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div id="online-status" class="online-status">–û–Ω–ª–∞–π–Ω</div>
            <button id="installButton" class="install-btn">üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            
           <h1>üé® COLORISTICA</h1>
<p class="subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è –≤–æ–ª–æ—Å</p>
        </header>

        <div class="main-grid">
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="selection-panel">
                <div class="selection-header">
                    <div class="selected-display">
                        <div class="selected-code" id="selectedColorCode">-.-</div>
                        <div class="selected-name" id="selectedColorName">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –∏ —Ç–æ–Ω</div>
                    </div>
                    <div class="quick-select">
                        <button class="quick-btn" onclick="selectExample(10, 1)">10.1</button>
                        <button class="quick-btn" onclick="selectExample(7, 3)">7.3</button>
                        <button class="quick-btn" onclick="selectExample(6, 4)">6.4</button>
                        <button class="quick-btn" onclick="selectExample(5, 7)">5.7</button>
                    </div>
                </div>

                <!-- –ö—Ä—É–≥–∏ –≤—ã–±–æ—Ä–∞ -->
                <div class="selection-circles">
                    <div class="circle-container">
                        <div class="circle-label">–£—Ä–æ–≤–µ–Ω—å –≥–ª—É–±–∏–Ω—ã —Ç–æ–Ω–∞</div>
                        <div class="color-circle depth-circle" id="depthCircle"></div>
                    </div>
                    
                    <div class="circle-container">
                        <div class="circle-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞</div>
                        <div class="color-circle tone-circle" id="toneCircle"></div>
                    </div>
                </div>

                
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="info-panel">
                <div class="info-card">
                    <h3>üé® –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –¶–í–ï–¢–ï</h3>
                    
                    <div id="errorContainer" class="error-container">
                        <strong>‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è!</strong>
                        <p id="errorMessage"></p>
                    </div>
                    
                    <div id="colorInfoContainer" class="color-info-container">
                        <div class="color-recipe">
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –≥–ª—É–±–∏–Ω—ã –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞</p>
                        </div>
                    </div>
                    
                    <!-- –ë–ª–æ–∫ –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ -->
                    <div class="neutralization-box" id="neutralizationContainer">
                        <div class="neutralization-header">üéØ –ù–ï–ô–¢–†–ê–õ–ò–ó–ê–¶–ò–Ø –§–û–ù–ê –û–°–í–ï–¢–õ–ï–ù–ò–Ø</div>
                        <div id="neutralizationContent">
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</p>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üõ†Ô∏è –ò–ù–°–¢–†–£–ú–ï–ù–¢–´</h3>
                    
                    <div class="tools-grid">
                        <div class="tool-card" onclick="showCorrectorTable()">
                            <div class="tool-icon">üé®</div>
                            <div class="tool-content">
                                <div class="tool-title">–¢–∞–±–ª–∏—Ü–∞ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä–æ–≤</div>
                                <div class="tool-description">–í—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä—ã –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã</div>
                            </div>
                        </div>
                        
                        <div class="tool-card" onclick="showColorTables()">
                            <div class="tool-icon">üåà</div>
                            <div class="tool-content">
                                <div class="tool-title">–¢–∞–±–ª–∏—Ü—ã —Ü–≤–µ—Ç–æ–≤</div>
                                <div class="tool-description">–£—Ä–æ–≤–Ω–∏ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                            </div>
                        </div>
                        
                        <div class="tool-card" onclick="showLighteningGuide()">
                            <div class="tool-icon">‚ö°</div>
                            <div class="tool-content">
                                <div class="tool-title">–ì–∏–¥ –ø–æ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—é</div>
                                <div class="tool-description">–§–æ–Ω—ã –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê –ö–û–õ–û–†–ò–°–¢–ò–ö–ò
        // ============================================

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤
        const depthData = {
            1: { name: "–ß–µ—Ä–Ω—ã–π", color: "#000000" },
            2: { name: "–¢–µ–º–Ω–æ-–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π", color: "#2C1810" },
            3: { name: "–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π", color: "#422A1A" },
            4: { name: "–¢–µ–º–Ω—ã–π —à–∞—Ç–µ–Ω", color: "#5C3A22" },
            5: { name: "–®–∞—Ç–µ–Ω", color: "#7A4F2E" },
            6: { name: "–†—É—Å—ã–π", color: "#9C6D3C" },
            7: { name: "–°–≤–µ—Ç–ª—ã–π —Ä—É—Å—ã–π", color: "#BD8B4A" },
            8: { name: "–ë–ª–æ–Ω–¥–∏–Ω", color: "#D8A85C" },
            9: { name: "–°–≤–µ—Ç–ª—ã–π –±–ª–æ–Ω–¥–∏–Ω", color: "#F0C67A" },
            10: { name: "–°–≤–µ—Ç–ª–µ–π—à–∏–π –±–ª–æ–Ω–¥–∏–Ω", color: "#FFE1A3" }
        };

        const toneData = {
            0: { name: "–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π", color: "#D4BFA6", range: [1, 10] },
            1: { name: "–ü–µ–ø–µ–ª—å–Ω—ã–π", color: "#A8B8B8", range: [7, 10] },
            2: { name: "–ú–∞—Ç–æ–≤—ã–π", color: "#F0E9D8", range: [8, 10] },
            3: { name: "–ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π", color: "#E8C26A", range: [5, 10] },
            4: { name: "–ú–µ–¥–Ω—ã–π", color: "#C46C38", range: [4, 7] },
            5: { name: "–ë–µ–∂–µ–≤—ã–π", color: "#D9B998", range: [6, 9] },
            6: { name: "–ö—Ä–∞—Å–Ω—ã–π", color: "#9C2C4A", range: [3, 6] },
            7: { name: "–ú–∞—Ö–∞–≥–æ–Ω", color: "#7A402C", range: [3, 5] },
            8: { name: "–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π", color: "#E89438", range: [5, 8] },
            9: { name: "–Ø—Ä–∫–æ-–º–µ–¥–Ω—ã–π", color: "#D85C28", range: [4, 6] },
            10: { name: "–§–∏–æ–ª–µ—Ç–æ–≤—ã–π", color: "#8C548C", range: [7, 9] },
            12: { name: "–°–∏–Ω–∏–π", color: "#3C5A8C", range: [7, 9] }
        };

        // –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
        class ColorProfessional {
            // –ü–æ–ª—É—á–∏—Ç—å —Ñ–æ–Ω –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è –¥–ª—è —É—Ä–æ–≤–Ω—è
            static getLighteningBackground(level) {
                const backgrounds = {
                    1: { 
                        name: "–°–ò–ù–ò–ô", 
                        color: "#1a237e",
                        corrector: "–û—Ä–∞–Ω–∂–µ–≤—ã–π/–ú–µ–¥–Ω—ã–π",
                        dosage: "15-25 –º–ª/100–≥",
                        purpose: "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–Ω–µ–≥–æ –¥–ª—è —Ç–µ–º–Ω—ã—Ö —Ç–æ–Ω–æ–≤"
                    },
                    2: { 
                        name: "–§–ò–û–õ–ï–¢–û–í–û-–°–ò–ù–ò–ô", 
                        color: "#311b92",
                        corrector: "–ñ–µ–ª—Ç–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π",
                        dosage: "12-20 –º–ª/100–≥",
                        purpose: "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–Ω–µ-—Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–≥–æ"
                    },
                    3: { 
                        name: "–§–ò–û–õ–ï–¢–û–í–´–ô", 
                        color: "#4a148c",
                        corrector: "–ñ–µ–ª—Ç—ã–π",
                        dosage: "10-18 –º–ª/100–≥",
                        purpose: "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–≥–æ"
                    },
                    4: { 
                        name: "–ö–†–ê–°–ù–û-–§–ò–û–õ–ï–¢–û–í–´–ô", 
                        color: "#6a1b9a",
                        corrector: "–ñ–µ–ª—Ç–æ-–∑–µ–ª–µ–Ω—ã–π",
                        dosage: "8-15 –º–ª/100–≥",
                        purpose: "–°–ª–æ–∂–Ω–∞—è –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è"
                    },
                    5: { 
                        name: "–ö–†–ê–°–ù–û-–ö–û–†–ò–ß–ù–ï–í–´–ô", 
                        color: "#8b4513",
                        corrector: "–ó–µ–ª–µ–Ω—ã–π",
                        dosage: "7-12 –º–ª/100–≥",
                        purpose: "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∞—Å–Ω–æ–≥–æ"
                    },
                    6: { 
                        name: "–ö–†–ê–°–ù–´–ô", 
                        color: "#c62828",
                        corrector: "–ó–µ–ª–µ–Ω—ã–π",
                        dosage: "5-10 –º–ª/100–≥",
                        purpose: "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∞—Å–Ω–æ–≥–æ —Ñ–æ–Ω–∞"
                    },
                    7: { 
                        name: "–ö–†–ê–°–ù–û-–û–†–ê–ù–ñ–ï–í–´–ô", 
                        color: "#ef6c00",
                        corrector: "–°–∏–Ω–∏–π",
                        dosage: "3-8 –º–ª/100–≥",
                        purpose: "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ"
                    },
                    8: { 
                        name: "–û–†–ê–ù–ñ–ï–í–´–ô", 
                        color: "#ff9800",
                        corrector: "–°–∏–Ω–∏–π",
                        dosage: "2-6 –º–ª/100–≥",
                        purpose: "–ö–æ–Ω—Ç—Ä–æ–ª—å –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ"
                    },
                    9: { 
                        name: "–ñ–ï–õ–¢–û-–û–†–ê–ù–ñ–ï–í–´–ô", 
                        color: "#ffb74d",
                        corrector: "–°–∏–Ω–∏–π/–§–∏–æ–ª–µ—Ç–æ–≤—ã–π",
                        dosage: "1-4 –º–ª/100–≥",
                        purpose: "–î–µ–ª–∏–∫–∞—Ç–Ω–∞—è –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è"
                    },
                    10: { 
                        name: "–ñ–ï–õ–¢–´–ô", 
                        color: "#ffeb3b",
                        corrector: "–§–∏–æ–ª–µ—Ç–æ–≤—ã–π/–°–µ—Ä–µ–±—Ä–∏—Å—Ç—ã–π",
                        dosage: "0.5-2 –º–ª/100–≥",
                        purpose: "–¢–æ–Ω–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –±–ª–æ–Ω–¥–∞"
                    }
                };
                return backgrounds[level] || { name: "–ù–ï–¢", color: "#fff", corrector: "–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è", dosage: "0 –º–ª/100–≥" };
            }

            // –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
            static getNeutralizationAdvice(level, tone) {
                const background = this.getLighteningBackground(level);
                const toneInfo = toneData[tone];
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω—É–∂–Ω–∞ –ª–∏ –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è
                const warmTones = ["3", "4", "5", "8", "9"];
                const coldTones = ["1", "2", "10", "12", "0"];
                
                let needsNeutralization = false;
                let message = "";
                
                if (level >= 9 && coldTones.includes(tone.toString())) {
                    needsNeutralization = true;
                    message = "–¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–Ω–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –±–ª–æ–Ω–¥–∞";
                } else if (level <= 4 && coldTones.includes(tone.toString())) {
                    needsNeutralization = true;
                    message = "–¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è";
                } else if (level >= 5 && level <= 8) {
                    if (background.name.includes("–ö–†–ê–°–ù") && coldTones.includes(tone.toString())) {
                        needsNeutralization = true;
                        message = "–¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—å —Ñ–æ–Ω–∞";
                    }
                }
                
                if (!needsNeutralization) {
                    return {
                        required: false,
                        background: background,
                        message: `‚úÖ –§–æ–Ω –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è (${background.name}) —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ç–æ–Ω–æ–º ${toneInfo.name}`
                    };
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä—ã
                let correctors = [];
                const toneStr = tone.toString();
                
                if (toneStr === "1") {
                    correctors = [
                        { name: "–°–ò–ù–ò–ô (.12)", color: "#3C5A8C", dosage: level >= 7 ? "2-5 –º–ª/100–≥" : "5-10 –º–ª/100–≥" },
                        { name: "–§–ò–û–õ–ï–¢–û–í–´–ô (.10)", color: "#8C548C", dosage: level >= 7 ? "1-3 –º–ª/100–≥" : "3-6 –º–ª/100–≥" }
                    ];
                } else if (toneStr === "2") {
                    correctors = [
                        { name: "–°–ï–†–ï–ë–†–ò–°–¢–´–ô –ü–ï–†–õ–ê–ú–£–¢–†", color: "#D8BFD8", dosage: "1-3 –º–ª/100–≥" },
                        { name: "–§–ò–û–õ–ï–¢–û–í–´–ô (.10)", color: "#8C548C", dosage: "1-2 –º–ª/100–≥" }
                    ];
                } else if (["10", "12"].includes(toneStr)) {
                    correctors = [
                        { name: toneStr === "10" ? "–§–ò–û–õ–ï–¢–û–í–´–ô (.10)" : "–°–ò–ù–ò–ô (.12)", color: toneStr === "10" ? "#8C548C" : "#3C5A8C", dosage: level >= 7 ? "2-4 –º–ª/100–≥" : "4-8 –º–ª/100–≥" }
                    ];
                } else {
                    correctors = [
                        { name: "–°–¢–ê–ù–î–ê–†–¢–ù–´–ô –ö–û–†–†–ï–ö–¢–û–†", color: "#888", dosage: "3-6 –º–ª/100–≥" }
                    ];
                }
                
                return {
                    required: true,
                    background: background,
                    correctors: correctors,
                    message: message
                };
            }

            // –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—é
            static getLighteningAdvice(level, tone) {
                let stages, oxidizer, proportions, time;
                
                if (level <= 3) {
                    stages = "3-4 –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 3-4 –Ω–µ–¥–µ–ª–∏";
                    oxidizer = "12% –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–ø–∞, –∑–∞—Ç–µ–º 9%";
                    proportions = "1:2";
                    time = "50-60 –º–∏–Ω—É—Ç";
                } else if (level <= 6) {
                    stages = "1-2 –ø—Ä–æ—Ü–µ–¥—É—Ä—ã";
                    oxidizer = "9%";
                    proportions = "1:1.5";
                    time = "40-50 –º–∏–Ω—É—Ç";
                } else if (level <= 8) {
                    stages = "1 –ø—Ä–æ—Ü–µ–¥—É—Ä–∞";
                    oxidizer = "6%";
                    proportions = "1:1";
                    time = "35-45 –º–∏–Ω—É—Ç";
                } else {
                    stages = "–¢–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è";
                    oxidizer = "1.5-3%";
                    proportions = "1:2";
                    time = "20-30 –º–∏–Ω—É—Ç";
                }
                
                return { stages, oxidizer, proportions, time };
            }

            // –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç —Å–º–µ—à–∏–≤–∞–Ω–∏—è
            static getMixingRecipe(level, tone) {
                let baseAmount, mixerAmount, oxidizerAmount, correctorAmount;
                
                if (level >= 9) {
                    baseAmount = 45;
                    mixerAmount = 5;
                    oxidizerAmount = 90;
                    correctorAmount = 0.5;
                } else if (level >= 7) {
                    baseAmount = 40;
                    mixerAmount = 10;
                    oxidizerAmount = 50;
                    correctorAmount = 2;
                } else if (level >= 5) {
                    baseAmount = 35;
                    mixerAmount = 15;
                    oxidizerAmount = 75;
                    correctorAmount = 5;
                } else {
                    baseAmount = 30;
                    mixerAmount = 20;
                    oxidizerAmount = 100;
                    correctorAmount = 10;
                }
                
                let oxidizerPercent;
                if (level >= 9) oxidizerPercent = "1.5-3%";
                else if (level >= 7) oxidizerPercent = "6%";
                else if (level >= 5) oxidizerPercent = "9%";
                else oxidizerPercent = "12%";
                
                return {
                    base: `${baseAmount}–≥ –æ—Å–Ω–æ–≤—ã ${level}.0`,
                    mixer: `${mixerAmount}–≥ –º–∏–∫—Å—Ç–æ–Ω–∞ .${tone}`,
                    oxidizer: `${oxidizerAmount}–≥ –æ–∫–∏—Å–ª–∏—Ç–µ–ª—è ${oxidizerPercent}`,
                    corrector: correctorAmount > 0 ? `${correctorAmount}–≥ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä–∞` : "–ë–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä–∞",
                    total: `100–≥ –≥–æ—Ç–æ–≤–æ–π —Å–º–µ—Å–∏`
                };
            }
        }

        // ============================================
        // –ò–ù–¢–ï–†–§–ï–ô–°
        // ============================================

        let currentDepth = null;
        let currentTone = null;

        function isValidCombination(depth, tone) {
            if (!toneData[tone]) return false;
            const range = toneData[tone].range;
            return depth >= range[0] && depth <= range[1];
        }

        function createDepthSegments() {
            const depthCircle = document.getElementById('depthCircle');
            const depthCount = 10;
            const angleStep = 360 / depthCount;
            
            for (let i = 0; i < depthCount; i++) {
                const depthNum = i + 1;
                const segment = document.createElement('div');
                segment.className = `segment depth-${depthNum}`;
                segment.dataset.depth = depthNum;
                
                const rotation = angleStep * i;
                segment.style.transform = `rotate(${rotation}deg)`;
                
                const number = document.createElement('div');
                number.className = 'segment-number';
                number.textContent = depthNum;
                segment.appendChild(number);
                
                segment.addEventListener('click', () => selectDepth(depthNum));
                depthCircle.appendChild(segment);
            }
        }

        function createToneSegments() {
            const toneCircle = document.getElementById('toneCircle');
            const tones = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12];
            const toneCount = tones.length;
            const angleStep = 360 / toneCount;
            
            for (let i = 0; i < toneCount; i++) {
                const toneNum = tones[i];
                const segment = document.createElement('div');
                segment.className = `segment tone-${toneNum}`;
                segment.dataset.tone = toneNum;
                
                const rotation = angleStep * i;
                segment.style.transform = `rotate(${rotation}deg)`;
                
                const number = document.createElement('div');
                number.className = 'segment-number';
                number.textContent = toneNum;
                segment.appendChild(number);
                
                segment.addEventListener('click', () => selectTone(toneNum));
                toneCircle.appendChild(segment);
            }
        }

        function selectDepth(depth) {
            document.querySelectorAll('.depth-circle .segment').forEach(seg => {
                seg.classList.remove('selected');
            });
            
            const segment = document.querySelector(`.depth-circle .segment[data-depth="${depth}"]`);
            if (segment) {
                segment.classList.add('selected');
                currentDepth = depth;
                updateToneAvailability();
                updateDisplay();
            }
        }

        function selectTone(tone) {
            document.querySelectorAll('.tone-circle .segment').forEach(seg => {
                seg.classList.remove('selected');
            });
            
            const segment = document.querySelector(`.tone-circle .segment[data-tone="${tone}"]`);
            if (segment && !segment.classList.contains('disabled')) {
                segment.classList.add('selected');
                currentTone = tone;
                updateDisplay();
            }
        }

        function updateToneAvailability() {
            document.querySelectorAll('.tone-circle .segment').forEach(segment => {
                const tone = parseInt(segment.dataset.tone);
                segment.classList.remove('disabled');
                
                if (currentDepth && !isValidCombination(currentDepth, tone)) {
                    segment.classList.add('disabled');
                    segment.classList.remove('selected');
                    if (currentTone === tone) currentTone = null;
                }
            });
        }

        function selectExample(depth, tone) {
            selectDepth(depth);
            selectTone(tone);
        }

        function updateDisplay() {
            const errorContainer = document.getElementById('errorContainer');
            const errorMessage = document.getElementById('errorMessage');
            
            if (currentDepth !== null && currentTone !== null) {
                const colorCode = `${currentDepth}.${currentTone}`;
                document.getElementById('selectedColorCode').textContent = colorCode;
                
                if (!isValidCombination(currentDepth, currentTone)) {
                    errorContainer.classList.add('show');
                    errorMessage.innerHTML = `
                        –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
                    `;
                    document.getElementById('selectedColorName').textContent = "–û—à–∏–±–∫–∞";
                    return;
                }
                
                errorContainer.classList.remove('show');
                updateColorInfo();
                updateNeutralization();
            }
        }

        function generatePreviewColor(depth, tone) {
            const depthColor = depthData[depth].color;
            const toneColor = toneData[tone].color;
            
            const hexToRgb = hex => {
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                return { r, g, b };
            };
            
            const rgb1 = hexToRgb(depthColor);
            const rgb2 = hexToRgb(toneColor);
            
            const r = Math.round(rgb1.r * 0.7 + rgb2.r * 0.3);
            const g = Math.round(rgb1.g * 0.7 + rgb2.g * 0.3);
            const b = Math.round(rgb1.b * 0.7 + rgb2.b * 0.3);
            
            const rgbToHex = (r, g, b) => {
                return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            };
            
            return rgbToHex(r, g, b);
        }

        function updateColorInfo() {
            const container = document.getElementById('colorInfoContainer');
            const colorCode = `${currentDepth}.${currentTone}`;
            const toneName = toneData[currentTone].name;
            const depthName = depthData[currentDepth].name;
            const previewColor = generatePreviewColor(currentDepth, currentTone);
            
            const background = ColorProfessional.getLighteningBackground(currentDepth);
            const lightening = ColorProfessional.getLighteningAdvice(currentDepth, currentTone);
            const recipe = ColorProfessional.getMixingRecipe(currentDepth, currentTone);
            
            container.innerHTML = `
                <div class="color-recipe" style="border-left-color: ${previewColor}">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0;">
                        <div style="width: 80px; height: 80px; background: ${previewColor}; border-radius: 12px; border: 3px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); flex-shrink: 0;"></div>
                        <div style="flex: 1;">
                            <h4 style="color: #4a148c; margin-bottom: 5px; font-size: 1.3rem;">${depthName} ${toneName.toLowerCase()}</h4>
                            <p style="color: #ff5722; font-weight: 600; font-size: 1.1rem;">–ö–æ–¥: ${colorCode}</p>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <div class="section-title">üìä –û–°–ù–û–í–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´</div>
                        <div class="info-row">
                            <span class="info-label">–£—Ä–æ–≤–µ–Ω—å –≥–ª—É–±–∏–Ω—ã:</span>
                            <span class="info-value">${currentDepth} (${depthName})</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span>
                            <span class="info-value">${currentTone} (${toneName})</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–§–æ–Ω –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è:</span>
                            <span class="info-value" style="color: ${background.color};">${background.name}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä:</span>
                            <span class="info-value">${background.corrector}</span>
                        </div>
                    </div>
                    
                    <div class="info-section highlight">
                        <div class="section-title">‚ö° –ü–†–û–¶–ï–°–° –û–°–í–ï–¢–õ–ï–ù–ò–Ø</div>
                        <div class="info-row">
                            <span class="info-label">–≠—Ç–∞–ø—ã:</span>
                            <span class="info-value">${lightening.stages}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–û–∫–∏—Å–ª–∏—Ç–µ–ª—å:</span>
                            <span class="info-value">${lightening.oxidizer}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–ü—Ä–æ–ø–æ—Ä—Ü–∏–∏:</span>
                            <span class="info-value">${lightening.proportions}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–í—Ä–µ–º—è –≤—ã–¥–µ—Ä–∂–∫–∏:</span>
                            <span class="info-value">${lightening.time}</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <div class="section-title">üß™ –†–ï–¶–ï–ü–¢ –°–ú–ï–®–ò–í–ê–ù–ò–Ø (–Ω–∞ 100–≥)</div>
                        <div class="recipe-grid">
                            <div class="recipe-item">
                                <div class="recipe-amount">${recipe.base.split(' ')[0]}</div>
                                <div class="recipe-name">–û—Å–Ω–æ–≤–∞ ${currentDepth}.0</div>
                            </div>
                            <div class="recipe-item">
                                <div class="recipe-amount">${recipe.mixer.split(' ')[0]}</div>
                                <div class="recipe-name">–ú–∏–∫—Å—Ç–æ–Ω .${currentTone}</div>
                            </div>
                            <div class="recipe-item">
                                <div class="recipe-amount">${recipe.oxidizer.split(' ')[0]}</div>
                                <div class="recipe-name">–û–∫–∏—Å–ª–∏—Ç–µ–ª—å ${recipe.oxidizer.split(' ')[2]}</div>
                            </div>
                            <div class="recipe-item">
                                <div class="recipe-amount">${recipe.corrector !== "–ë–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä–∞" ? recipe.corrector.split(' ')[0] : "-"}</div>
                                <div class="recipe-name">${recipe.corrector !== "–ë–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä–∞" ? "–ö–æ—Ä—Ä–µ–∫—Ç–æ—Ä" : "–ö–æ—Ä—Ä–µ–∫—Ç–æ—Ä"}</div>
                            </div>
                        </div>
                        <div style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, #4a148c 0%, #6a1b9a 100%); color: white; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 5px;">üé® –ò–¢–û–ì–û –ì–û–¢–û–í–û–ô –°–ú–ï–°–ò</div>
                            <div style="font-size: 1.8rem; font-weight: 800;">${recipe.total}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('selectedColorName').textContent = `${depthName} ${toneName.toLowerCase()}`;
        }

        function updateNeutralization() {
            const container = document.getElementById('neutralizationContent');
            const neutralization = ColorProfessional.getNeutralizationAdvice(currentDepth, currentTone);
            const background = neutralization.background;
            
            let html = '';
            
            if (neutralization.required) {
                html = `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; padding: 15px; background: white; border-radius: 10px;">
                            <div class="neutral-color" style="background: ${background.color};"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; color: #6a1b9a; margin-bottom: 3px;">
                                    –§–æ–Ω –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è: ${background.name}
                                </div>
                                <div style="color: #666; font-size: 0.9rem;">
                                    ${background.purpose}
                                </div>
                            </div>
                        </div>
                        
                        <div style="color: #666; margin-bottom: 15px; padding: 12px; background: rgba(255,255,255,0.8); border-radius: 8px;">
                            ${neutralization.message}
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                `;
                
                neutralization.correctors.forEach((corrector, index) => {
                    const borderColors = ['#3C5A8C', '#8C548C', '#4CAF50'];
                    html += `
                        <div class="neutralization-item" style="border-left-color: ${corrector.color}">
                            <div class="neutral-color" style="background: ${corrector.color}"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; color: #4a148c; margin-bottom: 5px; font-size: 1rem;">
                                    ${corrector.name}
                                </div>
                                <div style="color: #666; font-size: 0.9rem;">
                                    <strong>–î–æ–∑–∏—Ä–æ–≤–∫–∞:</strong> ${corrector.dosage}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
            } else {
                html = `
                    <div style="text-align: center; padding: 20px 15px;">
                        <div style="display: inline-flex; align-items: center; gap: 15px; background: #e8f5e9; padding: 20px; border-radius: 12px; border: 2px solid #4caf50;">
                            <div style="font-size: 2rem;">‚úÖ</div>
                            <div>
                                <div style="font-weight: 700; color: #2e7d32; margin-bottom: 8px; font-size: 1.1rem;">–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è</div>
                                <div style="color: #388e3c; font-size: 1rem;">${neutralization.message}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        // ============================================
        // –ò–ù–°–¢–†–£–ú–ï–ù–¢–´
        // ============================================

        function showCorrectorTable() {
            showModal("üé® –¢–ê–ë–õ–ò–¶–ê –ö–û–†–†–ï–ö–¢–û–†–û–í",
                `<div class="modal-section">
                    <h3>üåà –û–°–ù–û–í–ù–´–ï –ö–û–†–†–ï–ö–¢–û–†–´:</h3>
                    <p><strong>–°–ò–ù–ò–ô (.12)</strong> - –Ω–µ–π—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∏ –∂–µ–ª—Ç—ã–π —Ñ–æ–Ω</p>
                    <p><strong>–§–ò–û–õ–ï–¢–û–í–´–ô (.10)</strong> - –Ω–µ–π—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –∂–µ–ª—Ç—ã–π —Ñ–æ–Ω</p>
                    <p><strong>–ó–ï–õ–ï–ù–´–ô</strong> - –Ω–µ–π—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω</p>
                    <p><strong>–ó–û–õ–û–¢–ò–°–¢–´–ô (.3)</strong> - –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–ø–ª–æ—Ç—É</p>
                </div>`
            );
        }

        function showColorTables() {
            showModal("üåà –¢–ê–ë–õ–ò–¶–´ –¶–í–ï–¢–û–í",
                `<div class="modal-section">
                    <h3>üìä –£–†–û–í–ù–ò –ì–õ–£–ë–ò–ù–´ –¢–û–ù–ê:</h3>
                    <p>1-3: –¢–µ–º–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ (—Å–∏–Ω–∏–π/—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ñ–æ–Ω)</p>
                    <p>4-6: –°—Ä–µ–¥–Ω–∏–µ –æ—Ç—Ç–µ–Ω–∫–∏ (–∫—Ä–∞—Å–Ω—ã–π/–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π —Ñ–æ–Ω)</p>
                    <p>7-8: –°–≤–µ—Ç–ª—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ (–æ—Ä–∞–Ω–∂–µ–≤—ã–π —Ñ–æ–Ω)</p>
                    <p>9-10: –ë–ª–æ–Ω–¥—ã (–∂–µ–ª—Ç—ã–π —Ñ–æ–Ω)</p>
                </div>`
            );
        }

        function showLighteningGuide() {
            showModal("‚ö° –ì–ò–î –ü–û –û–°–í–ï–¢–õ–ï–ù–ò–Æ",
                `<div class="modal-section">
                    <h3>üéØ –§–û–ù–´ –û–°–í–ï–¢–õ–ï–ù–ò–Ø:</h3>
                    <p><strong>–£—Ä–æ–≤–Ω–∏ 10-9:</strong> –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω ‚Üí –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä</p>
                    <p><strong>–£—Ä–æ–≤–Ω–∏ 8-7:</strong> –û—Ä–∞–Ω–∂–µ–≤—ã–π —Ñ–æ–Ω ‚Üí –°–∏–Ω–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä</p>
                    <p><strong>–£—Ä–æ–≤–Ω–∏ 6-5:</strong> –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω ‚Üí –ó–µ–ª–µ–Ω—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä</p>
                    <p><strong>–£—Ä–æ–≤–Ω–∏ 4-3:</strong> –§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ñ–æ–Ω ‚Üí –°–ª–æ–∂–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è</p>
                </div>`
            );
        }

        function showModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>${title}</h2>
                        <span class="close" onclick="this.parentElement.parentElement.parentElement.style.display='none'">&times;</span>
                    </div>
                    <div class="modal-body">${content}</div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'block';
            
            modal.onclick = function(e) {
                if (e.target === modal) modal.style.display = 'none';
            }
        }

        // // ============================================
// PWA –§–£–ù–ö–¶–ò–ò
// ============================================

let deferredPrompt;
let isInStandaloneMode = false;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ standalone (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
function checkDisplayMode() {
    isInStandaloneMode = window.matchMedia('(display-mode: standalone)').matches || 
                        window.navigator.standalone === true;
    
    if (isInStandaloneMode) {
        console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ standalone —Ä–µ–∂–∏–º–µ');
        const installButton = document.getElementById('installButton');
        if (installButton) installButton.style.display = 'none';
    }
}

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
function registerServiceWorker() {
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
            .then(registration => {
                console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration.scope);
            })
            .catch(error => {
                console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
            });
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω
function updateOnlineStatus() {
    const statusElement = document.getElementById('online-status');
    if (statusElement) {
        const isOnline = navigator.onLine;
        statusElement.textContent = isOnline ? '–û–Ω–ª–∞–π–Ω' : '–û—Ñ—Ñ–ª–∞–π–Ω';
        statusElement.className = isOnline ? 'online-status online' : 'online-status offline';
        
        if (!isOnline) {
            // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–∞–±–æ—Ç–µ –æ—Ñ—Ñ–ª–∞–π–Ω
            console.log('–†–∞–±–æ—Ç–∞ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ');
        }
    }
}

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    const installButton = document.getElementById('installButton');
    if (installButton && !isInStandaloneMode) {
        installButton.style.display = 'block';
        installButton.addEventListener('click', async () => {
            installButton.style.display = 'none';
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${outcome} —É—Å—Ç–∞–Ω–æ–≤–∫—É`);
            deferredPrompt = null;
        });
    }
});

// –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
window.addEventListener('appinstalled', () => {
    console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
    const installButton = document.getElementById('installButton');
    if (installButton) installButton.style.display = 'none';
});

// –°–æ–±—ã—Ç–∏—è –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω
window.addEventListener('online', updateOnlineStatus);
window.addEventListener('offline', updateOnlineStatus);

// ============================================
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
// ============================================

function initApp() {
    createDepthSegments();
    createToneSegments();
    selectExample(7, 1);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PWA
    checkDisplayMode();
    registerServiceWorker();
    updateOnlineStatus();
    
    // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
    if (!isInStandaloneMode && /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        document.body.requestFullscreen?.().catch(console.log);
    }
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', initApp);